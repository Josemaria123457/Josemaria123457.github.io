<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pinonet – Pago seguro</title>
</head>
<body style="font-family: Arial; text-align: center; padding: 40px;">

  <h1>Servicio de mandado</h1>
  <p>Precio fijo: <strong>$59 MXN</strong></p>

  <!-- Contenedor para el botón -->
  <div id="paypal-button-container"></div>

  <!-- Mensaje de estado -->
  <div id="mensaje" style="margin-top: 20px; font-weight: bold;"></div>

  <!-- SDK de PayPal (usa tu Client ID en lugar de TU_CLIENT_ID) -->
  <script src="https://www.paypal.com/sdk/js?client-id=AZbQEnn8s_5BZiMYT24YBIYr3GhOksOsMmvhWbH2OPjJmuCvbQKeQ-FsXKxgriall7poBwzT2K70rncw&currency=MXN&components=buttons"></script>

  <script>
    const monto = "59.00";
    const mensaje = document.getElementById('mensaje');

    paypal.Buttons({
      style: { layout: 'vertical', color: 'gold', shape: 'rect', label: 'paypal' },

      // Crear orden
      createOrder: (data, actions) => {
        return actions.order.create({
          purchase_units: [{
            amount: { value: monto, currency_code: 'MXN' },
            description: 'Servicio de mandado'
          }]
        });
      },

      // Cuando el pago se aprueba
      onApprove: (data, actions) => {
        mensaje.textContent = 'Procesando pago...';
        return actions.order.capture().then((details) => {
          if (details.status === 'COMPLETED') {
            const nombre = details.payer?.name?.given_name || 'cliente';
            mensaje.innerHTML = `✅ ¡Compra exitosa! Gracias, ${nombre}.<br>ID de orden: ${details.id}`;
          } else {
            mensaje.textContent = '⚠️ El pago no se completó.';
          }
        });
      },

      // Si el usuario cancela
      onCancel: () => {
        mensaje.textContent = '❌ Pago cancelado por el usuario.';
      },

      // Si hay error
      onError: (err) => {
        console.error(err);
        mensaje.textContent = '❌ Error al procesar el pago. Intenta nuevamente.';
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>

